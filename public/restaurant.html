<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="asset/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="asset/favicon.ico" type="image/x-icon" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <script src="https://kit.fontawesome.com/fdc798ee43.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="styles/restaurant.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

    <title>Table Hopper</title>
</head>


<body onload="loadRestaurantInfo()">
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand tablehopper ml-2" href="#" style="color: #006AFF;">Table Hopper</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-list" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg" style="color: white;">
                    <path fill-rule="evenodd"
                        d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                </svg>
            </button>

        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
            <ul class="nav">
                <!-- <li class="nav-item active">
                        <a class="nav-link">About Us<span
                                class="sr-only">(current)</span></a>
                    </li>-->
                <li class="nav-item">
                    <a class="nav-link" href="login.html">Log In</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="register.html" style="background-color: #006AFF;border-radius: 5px;">Sign Up</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="col-sm-6 restaurant">

    </div>


</body>


<script>
    function loadRestaurantInfo() {
        const urlParams = new URLSearchParams(window.location.search);
        console.log(urlParams)
        const myParam = urlParams.get('id');
        console.log(myParam)
        var request = new XMLHttpRequest();
        console.log(request)
        request.open("GET", `restaurants/id/${myParam}`, true);
        request.setRequestHeader("Content-Type", "application/json");
        request.onload = function() {
            response = JSON.parse(request.responseText);
            let str = ""
            for (var i = 0; i < response.length; i++) {
                var time = response[i].restaurantOpeningHours.split(",")
                console.log(time)
                console.log(response[i].restaurantFeatures)
                str += `
        <h3 id="restaurantName">${response[i].restaurantName}</h3>
        <h5 id="restaurantCategory">${response[i].restaurantCategory}</h5>
        <h5 id="restaurantAddress"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>${response[i].restaurantAddress}</h5>

        <img src="asset/wallpaper.png" id="restaurantImage">

        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'restaurant-about')" id="defaultOpen">Overview</button>
            <button class="tablinks" onclick="openTab(event, 'restaurant-review')" >Review</button>
        </div>
        <div id="restaurant-about" class="tabcontent">
            <h5 id="restaurant-about-text"><i class="fas fa-info-circle" style="font-size: 18px;margin-right: 5px;"></i> About the restaurant</h5>
            <div class="h_line"></div>
            <h5 id="restaurantAbout">${response[i].restaurantAbout}</h5>

            <div class="review-features" style="margin-bottom: 5vh">
                <h5 id="restaurant-about-text"><i class="fas fa-question-circle" style="font-size: 18px;margin-right: 5px;"></i> Features and Pricing</h5>
                <div class="h_line"></div>
                <div id="restaurantStar">
                    <div class="stars-outer">
                        <div class="stars-inner">${response[i].restaurantRating}</div>
                    </div>
                </div>
                <h5 id="restaurantFeatures"><i class="fas fa-check-circle" style="color: limegreen"></i> ${response[i].restaurantFeatures[0]}</h5>
                <h5 id="restaurantFeatures"><i class="fas fa-check-circle" style="color: limegreen"></i> ${response[i].restaurantFeatures[1]}</h5>
                <h5 id="restaurantPricing"><i class="far fa-money-bill-alt" style="color: green"></i> ${response[i].restaurantPricing}</h5>
            </div>

            <div class="opening-Hour" style="margin-bottom: 5vh">
                <h5 id="restaurant-about-text"><i class="fas fa-clock" style="font-size: 18px;margin-right: 5px;"></i> Opening Hours</h5>
                <div class="h_line"></div>
                <p style="font-family: prodmed;">${response[i].restaurantOpeningHours}</p>
            </div>

            <div class="contact" style="margin-bottom: 5vh">
                <h5 id="restaurant-about-text"><i class="fas fa-mobile-alt" style="font-size: 18px;margin-right: 5px;"></i> Contact Us</h5>
                <div class="h_line"></div>
                <ul>
                    <li id="contact-phone" style="font-family: prodmed;margin-top: 5px;">${response[i].restaurantPhone}</li>
                    <li id="contact-email" style="font-family: prodmed;">${response[i].restaurantEmail}</li>
                    <li id="contact-socialMedia" style="font-family: prodmed;">${response[i].restaurantSocialMedia}</li>
                </ul>
            </div>
            <div class="website" style="margin-bottom: 5vh">
                <h5 id="restaurant-about-text"><i class="fas fa-laptop" style="font-size: 18px;margin-right: 5px;"></i> Find Us at</h5>
                <div class="h_line"></div>
                <a href="https://www.google.com" id="website-link" style="font-family: prodmed;margin-top: 5px;">${response[i].restaurantLink}</a>
            </div>
        </div>



        
        <div id="restaurant-review" class="tabcontent">
            <div class="addReview">
                <input id="addReviewBox" type="text" placeholder="  Write your review here">
                <button id="addReviewButton"><i class="fas fa-plus-circle"></i></button>
            </div>

            <div class="reviewSection">
                <img id="userImage" src="asset/wallpaper.png">
                <span id="userName">Username</span>

                <div id='commentSection'>
                    <p id="commentDate">Written at: <span id="writtenAtDate">23 June 2003</span></p>
                    <p id="commentRating">3 Star</p>
                    <p id="commentSectionText">Lorem ipsum this is my review omg omgLorem ipsum this is my review omg omgLorem ipsum this is my review omg omg</p>
                </div>
            </div>

            <div class="reviewSection">
                <img id="userImage" src="asset/wallpaper.png">
                <span id="userName">Username</span>

                <div id='commentSection'>
                    <p id="commentDate">Written at: <span id="writtenAtDate">23 June 2003</span></p>
                    <p id="commentSectionText">Lorem ipsum this is my review omg omgLorem ipsum this is my review omg omgLorem ipsum this is my review omg omg</p>
                </div>
            </div>
        </div>
        `
            }
            document.getElementsByClassName('col-sm-6 restaurant')[0].innerHTML = str
            document.getElementById("defaultOpen").click();
            displayStar()
        }
        request.send()
    }

    function displayStar() {
        var starCount = document.getElementsByClassName('stars-inner')
        const maxStar = 5
        for (let i = 0; i < starCount.length; i++) {
            var star = parseInt(starCount[i].innerHTML)
            var starUnchecked = maxStar - star
            starCount[i].innerHTML = `<span class="fa fa-star"></span>`.repeat(star) + `<span class="fa fa-star" style="opacity: 50%"></span>`.repeat(starUnchecked)
        }
    }

    function openTab(evt, tabname) {
        // Declare all variables

        // Get all elements with class="tabcontent" and hide them
        var tabcontent = document.getElementsByClassName("tabcontent");
        console.log(tabcontent)
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        console.log(tablinks)
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace("active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabname).style.display = "block";
        evt.currentTarget.className += "active";
    }
</script>













<!-- <script>
    function getRes() {
        var xmlHttpRequest = new XMLHttpRequest();

        xmlHttpRequest.onreadystatechange = function() {
            if (xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200) {
                var restaurantResponseText = xmlHttpRequest.responseText;
                var restaurant = JSON.parse(restaurantResponseText)
                console.log(typeof whatiwant)
                document.getElementById("restaurantName").innerHTML = restaurant.restaurant_name
                document.getElementById("restaurantCategory").innerHTML = restaurant.restaurant_category
                document.getElementById("restaurantAddress").innerHTML = restaurant.restaurant_address
            }
        };
        var resId = 300003;
        var url = '/restaurants/id/' + resId
        xmlHttpRequest.open('GET', url, true);
        xmlHttpRequest.setRequestHeader("Content-Type", "application/json");
        xmlHttpRequest.send();
    }
</script> -->

</html>